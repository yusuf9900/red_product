services:
  - type: web
    name: red-product-backend
    env: docker
    buildCommand: docker build -t red-product-backend .
    startCommand: >
      docker run -p 10000:10000 \
      -e APP_ENV=production \
      -e APP_DEBUG=false \
      -e DB_CONNECTION=mysql \
      -e DB_HOST=red-product-youssuf9900-54bf.k.aivencloud.com \
      -e DB_PORT=21188 \
      -e DB_DATABASE=defaultdb \
      -e DB_USERNAME=avnadmin \
      -e DB_PASSWORD=$DB_PASSWORD \
      -e DB_SSL_CA=/etc/ssl/certs/ca-certificates.crt \
      -e MYSQL_ATTR_SSL_VERIFY_SERVER_CERT=true \
      red-product-backend \
      php artisan serve --host=0.0.0.0 --port=10000
    envVars:
      - key: DB_PASSWORD
        sync: false  # À définir manuellement dans le tableau de bord Render
